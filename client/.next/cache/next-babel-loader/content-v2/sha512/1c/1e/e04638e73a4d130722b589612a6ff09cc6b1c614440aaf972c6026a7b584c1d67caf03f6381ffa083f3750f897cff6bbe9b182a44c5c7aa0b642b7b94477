{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\foubroker\\\\PROJECT_VOTE\\\\voting-at-mcgill\\\\client\\\\src\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport VoteFactoryContract from \"../contracts/VoteFactory.json\";\nimport VoteContract from \"../contracts/Vote.json\";\nimport getWeb3 from \"../getWeb3\";\nimport { Header } from '../components/header';\nimport { Link } from '../../routes';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid'; // CommonJS\n\nrequire(\"regenerator-runtime/runtime\");\n\nconst useStyles = makeStyles({\n  card: {\n    width: '80%'\n  }\n});\n\nfunction App() {\n  const classes = useStyles();\n  const {\n    0: votesAddresses,\n    1: setVotesAddresses\n  } = useState('');\n  const {\n    0: web3,\n    1: setWeb3\n  } = useState('');\n  const {\n    0: accounts,\n    1: setAccounts\n  } = useState('');\n  const {\n    0: contract,\n    1: setContract\n  } = useState('');\n  const {\n    0: voteContract,\n    1: setVoteContract\n  } = useState('');\n  const {\n    0: renderedAddresses,\n    1: renderAddresses\n  } = useState([]);\n  var Webber = 0;\n  useEffect(() => {\n    // get web3\n    var webb3;\n\n    async function initWeb3() {\n      console.log('initializing web3');\n      const web3Instance = await getWeb3();\n      setWeb3(web3Instance);\n    }\n\n    async function setup() {\n      if (webb3 == \"\") {\n        console.log('unable to get fact');\n        return;\n      }\n\n      try {\n        setAccounts(await webb3.eth.getAccounts()); // Get the contract instance.\n\n        const networkId = await webb3.eth.net.getId();\n        const deployedNetwork = VoteFactoryContract.networks[networkId];\n        const instance = new webb3.eth.Contract(VoteFactoryContract.abi, deployedNetwork && deployedNetwork.address);\n        setAccounts(await webb3.eth.getAccounts());\n        setContract(instance); // Set web3, accounts, and contract to the state, and then proceed with an\n      } catch (error) {\n        // Catch any errors for any of the above operations.\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    }\n\n    initWeb3();\n    setup();\n  }, [Webber]); // useEffect(() => {// get Factory contract\n  //   async function setup() {\n  //     if(web3 == \"\") {\n  //       console.log('unable to get fact')\n  //       return;\n  //     }\n  //     try {\n  //       setAccounts(await web3.eth.getAccounts());\n  //       // Get the contract instance.\n  //       const networkId = await web3.eth.net.getId();\n  //       const deployedNetwork = VoteFactoryContract.networks[networkId];\n  //       const instance = new web3.eth.Contract(\n  //         VoteFactoryContract.abi,\n  //         deployedNetwork && deployedNetwork.address,\n  //       );\n  //       setAccounts(await web3.eth.getAccounts());\n  //       setContract(instance);\n  //       // Set web3, accounts, and contract to the state, and then proceed with an\n  //     } catch (error) {\n  //       // Catch any errors for any of the above operations.\n  //       alert(\n  //         `Failed to load web3, accounts, or contract. Check console for details.`,\n  //       );\n  //       console.error(error);\n  //     }\n  //   }\n  //     setup();\n  // },[web3]);\n\n  useEffect(() => {\n    //just get Vote contract\n    async function setup() {\n      if (web3 == '') {\n        return;\n      }\n\n      try {\n        // Get the contract instance.\n        const instance = new web3.eth.Contract(VoteContract.abi, votesAddresses[votesAddresses.length - 1]);\n        setVoteContract(instance); // Set web3, accounts, and contract to the state, and then proceed with an\n      } catch (error) {\n        // Catch any errors for any of the above operations.\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    }\n\n    setup();\n  }, [contract, votesAddresses]);\n  useEffect(() => {\n    //display available votes\n    var displayVotes = async () => {\n      if (contract == '') {\n        return;\n      }\n\n      const response = await contract.methods.getDeployedVotes().call(); // Update state with the result.\n\n      setVotesAddresses(response);\n    };\n\n    displayVotes();\n  }, [contract]);\n  useEffect(() => {\n    //render votes\n    var displayInfo = async address => {\n      if (votesAddresses == '') {\n        return;\n      }\n\n      try {\n        // Get the contract instance.\n        const instance = new web3.eth.Contract(VoteContract.abi, address);\n        return await instance.methods.currentElection().call(); // Set web3, accounts, and contract to the state, and then proceed with an\n      } catch (error) {\n        // Catch any errors for any of the above operations.\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    };\n\n    var renderVotes = async () => {\n      if (!votesAddresses) {\n        return;\n      }\n\n      var temp = [];\n      votesAddresses.forEach(address => {\n        displayInfo(address).then(newAddress => temp.push(newAddress));\n      });\n      renderAddresses(temp);\n    };\n\n    renderVotes();\n  }, [votesAddresses]);\n\n  function displayVoteList() {\n    if (web3 == \"\") {\n      return \"waiting for votes to display...\";\n    } else if (votesAddresses == \"\") {\n      return \"no votes to display\";\n    }\n\n    console.log(JSON.stringify(renderedAddresses));\n    return renderedAddresses ? renderedAddresses.map((vote, index) => __jsx(Card, {\n      key: index,\n      variant: \"outlined\",\n      className: classes.card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }\n    }, __jsx(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }, __jsx(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }, __jsx(Grid, {\n      item: true,\n      xs: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 35\n      }\n    }, vote.title)), __jsx(Grid, {\n      item: true,\n      xs: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, \"Apply as Candidate\"), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, \"Vote\")))))) : __jsx(React.Fragment, null);\n  }\n\n  function tryWeb3() {\n    if (web3 == '') {\n      Webber++;\n      console.log(Webber);\n    } else {}\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  }, tryWeb3()), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }, displayVoteList())));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/foubroker/PROJECT_VOTE/voting-at-mcgill/client/src/pages/index.js"],"names":["React","useState","useEffect","makeStyles","VoteFactoryContract","VoteContract","getWeb3","Header","Link","Card","CardContent","Grid","require","useStyles","card","width","App","classes","votesAddresses","setVotesAddresses","web3","setWeb3","accounts","setAccounts","contract","setContract","voteContract","setVoteContract","renderedAddresses","renderAddresses","Webber","webb3","initWeb3","console","log","web3Instance","setup","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","error","alert","length","displayVotes","response","methods","getDeployedVotes","call","displayInfo","currentElection","renderVotes","temp","forEach","then","newAddress","push","displayVoteList","JSON","stringify","map","vote","index","title","tryWeb3"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport VoteFactoryContract from \"../contracts/VoteFactory.json\";\r\nimport VoteContract from \"../contracts/Vote.json\";\r\nimport getWeb3 from \"../getWeb3\";\r\nimport { Header } from '../components/header';\r\nimport { Link } from '../../routes'\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Grid from '@material-ui/core/Grid';\r\n// CommonJS\r\nrequire(\"regenerator-runtime/runtime\");\r\n\r\nconst useStyles = makeStyles({\r\n  card: {\r\n    width:'80%'\r\n  }\r\n});\r\n\r\nfunction App() {\r\n  const classes = useStyles();\r\n  const [votesAddresses, setVotesAddresses] = useState('');\r\n  const [web3, setWeb3] = useState('');\r\n  const [accounts, setAccounts] = useState('');\r\n  const [contract, setContract] = useState('');\r\n  const [voteContract, setVoteContract] = useState('');\r\n  const [renderedAddresses, renderAddresses] = useState([]);\r\n  var Webber = 0;\r\n\r\n  useEffect(() => {// get web3\r\n    var webb3\r\n    async function initWeb3() {\r\n      console.log('initializing web3')\r\n      const web3Instance = await getWeb3()\r\n      setWeb3(web3Instance);\r\n    }\r\n    async function setup() {\r\n      if(webb3 == \"\") {\r\n        console.log('unable to get fact')\r\n        return;\r\n      }\r\n      try {\r\n        setAccounts(await webb3.eth.getAccounts());\r\n        // Get the contract instance.\r\n        const networkId = await webb3.eth.net.getId();\r\n        const deployedNetwork = VoteFactoryContract.networks[networkId];\r\n        const instance = new webb3.eth.Contract(\r\n          VoteFactoryContract.abi,\r\n          deployedNetwork && deployedNetwork.address,\r\n        );\r\n        setAccounts(await webb3.eth.getAccounts());\r\n        setContract(instance);\r\n    \r\n        // Set web3, accounts, and contract to the state, and then proceed with an\r\n      } catch (error) {\r\n        // Catch any errors for any of the above operations.\r\n        alert(\r\n          `Failed to load web3, accounts, or contract. Check console for details.`,\r\n        );\r\n        console.error(error);\r\n      }\r\n    }\r\n    initWeb3();\r\n    setup();\r\n  },[Webber]);\r\n\r\n  // useEffect(() => {// get Factory contract\r\n  //   async function setup() {\r\n  //     if(web3 == \"\") {\r\n  //       console.log('unable to get fact')\r\n  //       return;\r\n  //     }\r\n  //     try {\r\n  //       setAccounts(await web3.eth.getAccounts());\r\n  //       // Get the contract instance.\r\n  //       const networkId = await web3.eth.net.getId();\r\n  //       const deployedNetwork = VoteFactoryContract.networks[networkId];\r\n  //       const instance = new web3.eth.Contract(\r\n  //         VoteFactoryContract.abi,\r\n  //         deployedNetwork && deployedNetwork.address,\r\n  //       );\r\n  //       setAccounts(await web3.eth.getAccounts());\r\n  //       setContract(instance);\r\n    \r\n  //       // Set web3, accounts, and contract to the state, and then proceed with an\r\n  //     } catch (error) {\r\n  //       // Catch any errors for any of the above operations.\r\n  //       alert(\r\n  //         `Failed to load web3, accounts, or contract. Check console for details.`,\r\n  //       );\r\n  //       console.error(error);\r\n  //     }\r\n  //   }\r\n  //     setup();\r\n  // },[web3]);\r\n\r\n  useEffect(() => {//just get Vote contract\r\n    async function setup() {\r\n      if(web3 == '') {\r\n        return;\r\n      }\r\n      try {\r\n        // Get the contract instance.\r\n        const instance = new web3.eth.Contract(\r\n          VoteContract.abi,\r\n          votesAddresses[votesAddresses.length-1],\r\n        );\r\n        setVoteContract(instance);\r\n        // Set web3, accounts, and contract to the state, and then proceed with an\r\n      } catch (error) {\r\n        // Catch any errors for any of the above operations.\r\n        alert(\r\n          `Failed to load web3, accounts, or contract. Check console for details.`,\r\n        );\r\n        console.error(error);\r\n      }\r\n    }\r\n      setup();\r\n  },[contract,votesAddresses]);\r\n\r\n  useEffect(()=> {//display available votes\r\n    var displayVotes = async () => {\r\n      if(contract == ''){\r\n        return;\r\n      }\r\n      const response = await contract.methods.getDeployedVotes().call();\r\n      // Update state with the result.\r\n      setVotesAddresses(response);\r\n    };\r\n    displayVotes();\r\n  },[contract]);\r\n\r\n  useEffect(()=> {//render votes\r\n    var displayInfo = async (address) => { \r\n      if(votesAddresses == '') {\r\n        return;\r\n      }\r\n      try {\r\n        // Get the contract instance.\r\n        const instance = new web3.eth.Contract(\r\n          VoteContract.abi,\r\n          address\r\n        );\r\n        return (await instance.methods.currentElection().call());\r\n        // Set web3, accounts, and contract to the state, and then proceed with an\r\n      } catch (error) {\r\n        // Catch any errors for any of the above operations.\r\n        alert(\r\n          `Failed to load web3, accounts, or contract. Check console for details.`,\r\n        );\r\n        console.error(error);\r\n      }\r\n    };\r\n    var renderVotes = async () => {\r\n        if (!votesAddresses){\r\n          return;\r\n        }\r\n        var temp = []\r\n        votesAddresses.forEach(address => {\r\n            displayInfo(address).then(newAddress =>\r\n            temp.push(newAddress)\r\n          )\r\n        })\r\n        renderAddresses(temp);\r\n      }\r\n      renderVotes();\r\n    },[votesAddresses]);\r\n\r\n\r\n  function displayVoteList() {\r\n    if(web3 == \"\"){\r\n      return \"waiting for votes to display...\"\r\n    }\r\n    else if(votesAddresses == \"\"){\r\n      return \"no votes to display\"\r\n    }\r\n    console.log(JSON.stringify(renderedAddresses));\r\n\r\n    return renderedAddresses ? renderedAddresses.map((vote, index) => \r\n        <Card key={index} variant=\"outlined\" className ={classes.card}>\r\n          <CardContent >\r\n            <Grid container>\r\n              <Grid item xs ={10}><span>{vote.title}</span></Grid>\r\n              <Grid item xs ={2}>\r\n                <div>            \r\n                  {/* <Link route ={`/elections/apply/${vote}`}>  */}\r\n                    Apply as Candidate\r\n                  {/* </Link> */}\r\n                </div>\r\n                <div>  \r\n                  {/* <Link route ={`/elections/vote/${vote}`}>  */}\r\n                    Vote\r\n                  {/* </Link> */}\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n          </CardContent>\r\n        </Card>\r\n      ) : <></>\r\n  }\r\n  function tryWeb3(){\r\n    if (web3 == ''){\r\n      Webber++\r\n      console.log(Webber)\r\n    }\r\n    else{\r\n    }\r\n  }\r\n\r\n  \r\n  return( \r\n    <>\r\n      <Header></Header>\r\n      <br></br>\r\n      <br></br>\r\n      <br></br>\r\n      <br></br>\r\n      <div className=\"App\">\r\n        <div>{ tryWeb3() }</div>\r\n        <div>{ displayVoteList() }</div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}